# Changelog

All notable changes to `permafrost-dev/node-ray` will be documented in this file.

---

## 1.16.0 - unreleased

- add `limit()` method
- add `once()` method
- add rate limiting

## 1.15.0 - 2021-05-30

- add `text()` method

## 1.14.0 - 2021-05-28

- intercepting `console.log()` messages now sends the message to both Ray and `console.log`.
- fix issue where using `sent_payload_callback` caused a stack overflow.

## 1.13.1 - 2021-05-27

- fix `intercept_console_log` to default to `false` when calling `create()`

## 1.13.0 - 2021-04-02

- add `enabled_callback` setting for determining the enabled state in a dynamic way
- add `sending_payload_callback` and `sent_payload_callback` settings

## 1.12.0 - 2021-03-12

- add `htmlMarkup(content)` method that displays a syntax-highlighted string of html _(instead of rendering it)_

- add `macro(name, callable)` method that allows adding custom methods onto the Ray class

## 1.11.0 - 2021-03-10

- allow specifying `scheme` in the configuration to allow using https in certain circumstances

## 1.10.1 - 2021-03-06

- fix `exception()` causing an error in Ray

- fix error in `RemovesRayFrames.isRayFrame()` when filename of a frame could not be found

## 1.10.0 - 2021-03-03

- add `exception()` method

- add `hostname` to origin data

## 1.9.2 - 2021-03-02

- bump package versions: `concurrently` to `6.0.0`, `eslint-config-prettier` to `8.1.0`

## 1.9.0 - 2021-03-01

- don't `await` calls to `updateRayAvailabilty()` in `send()` _(resolves #7 & #8)_

- don't send data to Ray when `NODE_ENV` is set to "production" or "staging" _(resolves #15)_

## 1.8.4 - 2021-03-01

- update rollup config

## 1.8.3 - 2021-03-01

- use `@permafrost-dev/pretty-format` package instead of `pretty-format`

## 1.8.2 - 2021-03-01

- add `tslib` package

## 1.8.1 - 2021-03-01

- change plugins used by pretty-format package to DOM only

## 1.8.0 - 2021-02-12

- changed `table()` and `TablePayload` to accept either an object or an array, as Ray expects an object for proper row labels to be displayed

- added `trace()` and `TracePayload`

- added `caller()` and `CallerPayload`

- added `event()` and `EventPayload`

- converted original `RemovesRayFrames` PHP trait to TypeScript
 
- fixed `getOriginFrame()`

- fixed `getCaller()`

- the source file and line number are now displayed correctly in the Ray app

## 1.7.0 - 2021-02-11

- update the way `Client` availabilty checks are done to avoid multiple checks in succession

- calculate the memory usage for `measure()` when used in NodeJS

- `pause()` now stops or resumes code execution properly

## 1.6.3 - 2021-02-10

- update Ray app availability status as soon as the client is created

- add helper method `Ray.client()`

- add helper method `Client.init()` to force an availability status update

## 1.6.2 - 2021-02-10

- change the way client availability status resets to avoid process hanging

- fix ConsoleInterceptor implementation

- change `ConsoleInterceptor.intercept()` and `.reset()` to `.enable()` and `.disable()`


## 1.6.1 - 2021-02-10

- enable client checks to see if the Ray app is running

- fix bug where ConsoleInterceptor could access Ray.client before it was created

## 1.6.0 - 2021-02-10

- add `ray().interceptor().intercept()` method to redirect all `console.log()` calls to Ray

- add ConsoleInterceptor class

- ensure all payloads have an origin, fixing an occasional bug caused during bundle creation _(i.e., webpack)_ where payloads were sent but Ray did not display them

- ensure `dayjs` and `stopwatch-node` packages are treated as external packages for the NodeJS and web versions

## 1.5.3 - 2021-02-09

- add node export variant _('node-ray/node')_

- fix import/exports for ./web.js

- code cleanup

## 1.5.2 - 2021-02-09

- fix sourcemaps generated by rollup

## 1.5.0 - 2021-02-09

- add ability to configure Ray within a Browser environment _(host, port, etc.)_

- add `measure()` method to measure the performance of a callback or interval _(see docs)_

- add `stopTime()` method to remove either a named stopwatch, or all stopwatches if no name is provided

## 1.4.4 - 2021-02-09

- update `web` variant module

- update readme

## 1.4.2 - 2021-02-07

- use `.mjs` extension for esm modules

## 1.4.1 - 2021-02-07

- change the output filenames to end with `.js`, instead of `.cjs` and `.mjs`

- update readme

## 1.4.0 - 2021-02-07

- bump `find-up` package version to `5.0`

- add `dayjs` package

- add `error()` method to display information about errors

- add `date()` method to display information about a date

## 1.3.0 - 2021-02-07

- fix raw html displaying instead of rendered html with calls like `ray({hello: 'world'})`

## 1.2.2 - 2021-02-07

- remove import of `os` module in the web build

## 1.2.0 - 2021-02-07

- add support for browser environments instead of only NodeJS

## 1.1.0 - 2021-02-07

- add `error()` method for displaying errors/exceptions

- update documentation

## 1.0.0 - 2021-02-06

- initial release
